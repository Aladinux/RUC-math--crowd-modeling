\section{Modeling of crowds}
\label{sec:crowds}
During the last two decades agent based models have been successfully  used to 
describe the behavior of crowds of pedestrians, however agent based model have their 
origin elsewhere and a short overview of this is given in section \ref{subsec:ABM}. We explain 
two different agent-based approaches, \emph{cellular automaton} and \emph{social force}, 
there have been to modeling a crowd of pedestrians. The social force model is chosen 
as a subject to be studied further. This allows us to establish some meaningful concepts 
for discussing the behavior of crowds in general, in order to have a basis on which 
we can analyse our chosen model. Finally we outline the different situations we 
want to simulate.

\subsection{Agent-based models and their origin}\label{subsec:ABM}
An agent based model is a model that describes the behavior of each individual 
object in the system. The individual behavior of each object then give rise to 
a collective behavior of the entire system.

The idea of agent based model is not a new one. They have their origin in physics 
where the idea dates back as far as 1820, however because of the sheer number of 
calculations need to be done in order to get meaningful information out of 
the system it hasn't been used much until the last half century\cite{simintro}. Now it is 
used in many different fields such molecular biology and economics\cite{MDbio} Agent based 
model are no longer just used in the "hard sciences" but have successfully been 
used to describe the behavior of packs of animals such as fish schools and 
groups of ladybugs. In these models a set a simple rules give rise to a collective 
behavior that resembles the behavior observed in the nature. 

The modeling of human behavior using agent-based models is a 
relatively new field in modeling \cite{helbing00}. 

During the last two decades model for pedestrian behavior have grown in 
interest for several reasons. First of all the model seems to have some 
striking analogies to gases and fluids. Secondly, it is possible to measure 
the quantities of the models and therefore they can be empirically tested. 
This has led to a series of different approaches to modeling crowds. We have 
chosen to concentrate on the agent based approachesÂ´which will be the subject 
of the next section.

\subsection{Agent-based approaches to crowd modeling}\label{subsec:ABapproach}
There have been developed a series of different agent based models to tackle the 
problem of simulation a crowd of which we will mention two. They are 
\emph{cellular automata models} and \emph{social force models}. These approaches 
have been chosen for their ability to make rather realistic simulations of 
crowd dynamics and because of the continues development of these kinds of models.
One approach does however not necessarily rule out another they can be combined. 
We will give a short outline of the basic concepts of both models and look at the 
success the models have had with simulation the behavior of crowds. 

A \emph{cellular automata model} consists of a grid of finite number of cells, like a chessboard. 
Each cell can have a finite number of states. The state of a given cell is determined by the 
neighboring cells. These kinds of model have been used successfully describe some phenomena 
that have been observed to happen in reality. Such phenomena are the effect of obstacles when 
leaving a room, jamming in narrow passages and lane formation. 

\emph{Social Force models} suggests that pedestrians are subject to social forces. These 
forces are not real physical forces, they do not follow newtons three laws. They are a 
measure of the pedestrians motivation to preform certain action. The forces arise from 
the environment and ofter pedestrians and can be both attractive and repulsive.

% We should probably mention the issue of path finding somewhere 
% around here. I.e. that the models themselves do not include path finding, 
% but that this can be added as another layer.

\subsection{Concepts for describing crowd behaviour}\label{concepts}
In order to analyse the behavior of crowds, we need to establish some 
concepts to describe this behavior. It is not obvious which concepts  are 
useful when we need to distinguish between the results we get from our 
simulations. In this section we describe which concepts we use to describe the 
behavior of crowds, and why we have chosen them. This is based on the 
literature of crowd modelling.

One of the reasons for modelling crowds is to discover ways to make crowd 
situations safer for pedestrians, e.g. when evacuating a building in event of 
a fire. One of the main factors in this scenario is the \emph{efficiency} of 
the crowd movement. This is especially important when clearing a room in the 
event of a fire or other disaster: the faster everyone gets out, the lower is 
the chance of someone dying from flames or smoke.

The efficiency of the crowd it measured by \emph{how close the average speed 
of a pedestrians is to the desired speed of the pedestrian}. This is done for 
every pedestrian in the simulation and this gives us a measure of how unaffected 
the crowd moves through the environment. If the every pedestrian moves at his 
desired speed throughout the entire simulation the efficiency will be at its 
maximum.

However the measurement of efficiency alone is not sufficient to describe all 
the aspects of the crowds behavior. We want to be able to say something about 
how the crowds move a specific parts of the environment for instance in a 
narrow passage or through a door opening. For this purpose we introduce the 
concept \emph{flow rate}. The flow rate is a measure of \emph{how many pedestrians 
that pass a point or line i space per unit of time}.

Furthermore we introduce the concept \emph{density}. The density is the \emph{number 
of people in an area of space}. The density is useful when comparing results from 
different simulations. 
% TODO: Why is it useful?

The last concept we want to introduce is the \emph{geometry} of the environment 
by geometry we mean \emph{the shape of the room or corridor} in which the simulation 
is taking place. We introduce this because we are interested in examining how 
the shape of the environment affects the behavior of the crowd.

These four concepts \emph{efficiency}, \emph{flow rate}, \emph{density} and 
\emph{geometry} will allow us to compare the results from our different simulations 
in some detail. For example if we change the geometry of the environment how does 
this change the efficiency of the crowd? If two rooms have the same geometry 
how does the density affect the flow rate through a door opening? If the efficiency 
is low does that imply a low flow rate? These are all questing that can be answered 
through simulations in the framework of the concepts we have just defined.    
% TODO: It is not the concepts that affect each other, it is the parameters 
% that affect the concepts.
% TODO: Move the explanation of geometry somewhere else.

\subsection{Our case(s)}
In this section we outline which cases we want to simulate and why.
One of the main reasons for doing simulations is that we want to to get 
a full understanding of the model. Doing simulations is a way to achieve this
understanding. Secondly we want to find any limitations and weaknesses of the 
model. Furthermore we want to simulate scenarios that have been experimentally 
tested in \citep{self-org}.

We start by making a series of simple simulations  where we can test isolated parts 
of the model and slowly increase the complexity of the simulations. Basically there 
are three levels of the model we want to simulate. 

First we want to model a square room with an exit in the middle of one of the walls. 
In this room there will be a modest amount of people and no obstacles. The purpose of 
this simulation is not to compare the results with real life but rather to catch any 
early mistakes or misunderstandings in our implementation of the model.

From this we move on to varying the parameters of the model too see how the changes in 
in the these affect the concepts of crowd behavior we defined in section \ref{concepts}. 
This will be done in the same simple simulation in order for us to have a transparent look 
at precisely how the parameters affect the concepts. The results of these simulations 
will be compared with the value of the parameters presented in the literature.

After this we will test how the model handles different geometries of the environment 
to see if the model starts producing unnatural crowd behavior as the complexity of the 
environment increases. 

In the end we will try so simulate more complicated situations to see if we can observe 
a range of self-organization phenomena that have been reported in the literature. As 
stated earlier there have been preformed experiments in these scenarios so we can 
compare our results with the results presented in the literature. These phenomena 
include clogging in bottlenecks, lane formation in bidirectional pedestrian 
flow and a faster-is-slower phenomena where some pedestrians end up moving slower than 
average because they are to impatient and try to overtake other pedestrians\cite{self-org}. 
Furthermore we want to test some phenomena  that according to the literature should make 
the model break down. An example of this could be to model a situation of a room filled 
with smoke.   

All this should give a thorough idea about how this model should be handled and what parts 
of it that could be improved. or were you should be careful when using the model.