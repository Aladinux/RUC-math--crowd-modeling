\section{Results}
\label{sec:results}
In this section we describe the results obtained from our simulations.
The section is devided into two parts. The first part presents the
constants we use and the scenarios that we simulate and comment on
the general success of our implementation of the model. We looked
for unrealistic or unexpected behavior in our simulations. In the
last part we present the results from our attempts to replicate
the phenomena presented in \cite{self-org}.Possible remedies for
any discrepancies between the expected and the actual results are
discussed in section~\ref{sec:discussion}.

\subsection{The basics}
This section is devided into three parts. First we present the
scenarios that we have simulated, then we present the constants
used in the simulations. We then move on to comment on the
general behavior of the pedestrians in our simulations.

\subsubsection{Scenarios}
We simulate four different scenarios, a rectangle shaped room with a
door in the middle of one of the walls, and three different variations
of corridors; a normal corridor, a corridor with a bottleneck in the
middle and a corridor with a sudden open space. In the corridors we have
the opportunity to make bidirectional flow. Screen shots from each
scenario are presented in figure \ref{fig:fourcases}.

\begin{figure}[h]
\centering
\subfloat[Square room.]{\resizebox{4cm}{!}{\input{Figures/squareroomps.tex}}}
\subfloat[Bottleneck.]{\resizebox{7cm}{!}{\input{Figures/bottleneckps.tex}}}\\
\subfloat[Corridor.]{\resizebox{7cm}{!}{\input{Figures/normalcorridorps.tex}}}
\subfloat[Corridor with an opening.]{\resizebox{7cm}{!}{\input{Figures/widekinksps.tex}}}
\caption{Screen shots of our four different scenarios.}
\label{fig:fourcases}
\end{figure}

\subsubsection{Constants}
In the simulation the parameters are set after \cite{ABconstant} and
\cite{self-org}, to see if we can replicate their simulations and results.
The general values we use are presented in table \ref{tbl:parameter-settings}.
We will through the chapter mention when the values are changed for a
specific case.

\begin{table}[ht]
    \begin{center}
        \begin{tabular}{l c r}
            \toprule
            \textbf{Description} & \textbf{Symbol} & \textbf{Value} \\
            \midrule
            \multicolumn{3}{c}{\textsf{Constants}}\\
            Interaction strength & A & $3,0$ \\
            Interaction range & B & $0,2$ \\
            Anisotropic constant & $\lambda$ & $0,1$ \\
            Wall repulsion strength & $U$ &  $2,0$ \\
            \midrule
            \multicolumn{3}{c}{\textsf{Initial conditions}}\\
            Mean pedestrian radius & $R_\alpha$ & $0,3 \pm 0,05 m$\\
            Mean desired velocity &  $V^{Id}_\alpha$ &  $1,34 \pm 0,26
            \frac{m}{s}$ \\
            Max velocity factor &  &  $1,3$ \\
            Relaxation time & $\tau$ & $1,0 s$\\
            \bottomrule
        \end{tabular}
        \caption[Constants and initial conditions]{Constants and initial
        conditions used for the simulations. $\pm$ indicates standard
        deviation in Gaussian distributed values.}
        \label{tbl:parameter-settings}
    \end{center}
\end{table}

\subsubsection{General behavior}
In this section we make some comments on the general behavior of
the pedestrians in the simulations. We checked for intersections between
the pedestrians, pedestrians crossing the walls and other bahavior that might
be relevant for the further investigations. We used the parameters in table
\ref{tbl:parameter-settings}.\\

\begin{figure}[h]
\centering
\subfloat[Pedestrians overlapping]{\includegraphics[scale=0.45]{Figures/pedestiranoverlapping.pdf}}
\subfloat[Overlapping between pedestrians and a wall]{\includegraphics[scale=0.45]{Figures/walloverlapping.pdf}}
\caption{The figure shows two simulations of the squared room. We see the overlapping that can occur between two pedestrians and between the walls and pedestrians. This kind of intersection is seen in most simulations, but they don't cross completely. The red dot on the figures are the desired locations}
\label{fig:overlapping}
\end{figure}

In the figure \ref{fig:overlapping} the overlapping between pedestrians
themselves and between walls and pedestrians. We see that in some situations
it is possible for the pedestrians to intersect quite alot, almost reaching
each others centers. The same thing is seen for the walls, where the wall
can get quite close to the center of a pedestrians. But inspite of this
we don't, with the chosen constants, see that they actually do cross. So
even though it might look like they get sqiuzzed alot together, no completely
unrealistic situations occur. Also we see no other strange scenarios, like
people going in a wrong direction or anything like that. So the most basic
requirements of the model are fulfilled.

We do however see some unrealistic behavior when we change the values in
\ref{tbl:parameter-settings} When looking at some of the different phenomenons,
we need to change certain values like the mean velocity. But when we do
this it starts to get unrealistic. When raising the desired velocity to
a speed like $2.5m/s$, we start to see people crossing each other and going
up to $3.5m/s$ we start to see people crossing the walls. This is a problem
since these results makes no sence to compares with. Lowering the timestep
with $1/10$ doesn't change this result at all. So to solve this problem we
have in some cases raised the wallues of the wall constant $U$ and the
pedestrains repulsion constant $A$. This makes the repulsions forces
big enough for the pedestrians to act 'noraml'. We will throughout the
chapter mention when we change the values and how much it is changed.

\subsection{The phenomena}\label{subsec:ThePhenomena}
In this section we present the results we obtained from our attempts
to replicate the the phenomena presented in \cite{self-org}.

\subsubsection{The faster-is-slower effect}
The faster-is-slower was expected to be seen in the square room scenario.
To see if this effects occurs we have looked at the leaving time as a function
of the desired velocity of the pedestrains. We made simulations with a desired
velocitygoing from $1.5m/s$ to $5m/s$ with steps of 0.1. The results are presented
in figure \ref{fig:isfasterslower}. We see some fluctutation on the graph, but the
overall pictureof the leaving time decreasing when the desired velocity goes up is
clear. So there no sign of an increase of the leaving time and therefore no faster
is slower. The only thing we see is that the negative slope is decreasing, meaning
that if the pedestrians moves twice as fast, they don't clear the room in half the
time.

%TODO: We should make runs with the desired velcity.
%This is what they compare with in the letters to nature article.

\begin{figure}[h]
\centering
\subfloat[Attempt to see the faster-is-slower effect in the square room.]{\includegraphics[scale=0.45]{Figures/fastIsSlowNot.pdf}}
\subfloat[Attempt to see the faster-is-slower effect in the normal corridor case.]{\includegraphics[scale=0.45]{Figures/corridor-flowrate-aggr-velocity_mean.pdf}}\\
\subfloat[Attempt to see the faster-is-slower effect in the bottleneck scenario.]{\includegraphics[scale=0.45]{Figures/bottleneck-flowrate-aggr-velocity_mean.pdf}}
\subfloat[Attempt to see the faster-is-slower efffect in the corridor with a wide space.]{\includegraphics[scale=0.45]{Figures/Wide-kink-one-directional-flowrate-agg.pdf}}
\caption{There is no evidence of the-faster-is slower effect, however it does seem that we see a faster-is-only-slightly-faster effect.}
\label{fig:isfasterslower}
\end{figure}

\subsubsection{Freezing by heating effect}
According to \cite{self-org} the freezing by heating effect should
arise when the max desired velocity of the pedestrians is raised in
situations where there is biderectional flow. We however does not
experience this in any of our simulations of the corridor. We tried
to raise the max velocity, see figure \ref{fig:freezingbyheating1} and
figure \ref{fig:freezingbyheating05}, but instead of observing the
freezing by heating effect, we actually saw that the pedestrians got
through the corridor more easily, and that the density in the corridor
was lower when the max velocity was high. So like the faster is slower
effect again we see no sign of a high desired velocity decreasing/stopping
the movement of the pedestrians.

\subsubsection{Lane formation}
Lane formation was expected to happen in the case of bidirectional
flow in corridors. In the article \ref{self-org} you read the following
statement:

\begin{quote}
If pedestrians crowds moving in opposite directions meet each other,
they form small \emph{channels} in the beginning, but these channels
later merge to produce wide lanes
\end{quote}

Since we have three different corridor cases we have looked for lane
formation in all of them. The results are presented in figure
\ref{fig:laneformation}. Lane formation is observed in every case
and they are of the nature described in \cite{self-org}.\\

\begin{figure}[h]
\centering
\subfloat[]{\resizebox{8cm}{!}{\input{Figures/corridor-01012.tex}}}
\subfloat[]{\resizebox{8cm}{!}{\input{Figures/corridor-01999.tex}}}\\
\subfloat[]{\resizebox{8cm}{!}{\input{Figures/corridor-01899.tex}}}
\caption{Lane formation in the different corridors.}
\label{fig:laneformation}
\end{figure}

\subsubsection{The Oscillatory flow}
The oscillatory flow is expected to arise in the case of bidirectional
flow through a bottleneck. The results are presented in figure
\ref{fig:oscillitoryflow}.\\

\begin{figure}[h]
\centering
\subfloat[A screen shot of bidirectional flow in the bottlenck]{\resizebox{7cm}{!}{\input{Figures/corridor-01799.tex}}}
\subfloat[Plot of the flow rate beyond each end of the corridor.]{\includegraphics[scale=0.5]{Figures/bottleneck-flowrate-2.pdf}}
\caption{}
\label{fig:oscillitoryflow}
\end{figure}

When looking at the simulation while it is running it is not
immediately clear that the oscillatory flow occurs. Clogging
appears in both ends of the bottleneck and people are sometimes
squeezed through the bottleneck. The graph presented in
\ref{fig:oscillitoryflow} does indicate that the oscillatory
flow occurs to some extent.

\subsection{Summery}
Our simulation run with only few unexpected behaviors.Lane formation
is observed in every all corridor cases and oscillatory flow is
observed to some extent. 